execute as @e[type=minecraft:marker,tag=xteleporter_a] at @s unless block ~ ~ ~ minecraft:dark_oak_sign{Text1:'{"color":"green","text":"双方向テレポーター"}'} unless block ~ ~ ~ minecraft:dark_oak_wall_sign{Text1:'{"color":"green","text":"双方向テレポーター"}'} run forceload remove ~ ~ 
execute as @e[type=minecraft:marker,tag=xteleporter_a] at @s if block ~ ~ ~ minecraft:dark_oak_sign{Text1:'{"color":"green","text":"双方向テレポーター"}'} run forceload add ~ ~
execute as @e[type=minecraft:marker,tag=xteleporter_a] at @s if block ~ ~ ~ minecraft:dark_oak_wall_sign{Text1:'{"color":"green","text":"双方向テレポーター"}'} run forceload add ~ ~
execute as @e[type=minecraft:marker,tag=xteleporter_a] at @s unless block ~ ~ ~ minecraft:dark_oak_sign{Text1:'{"color":"green","text":"双方向テレポーター"}'} unless block ~ ~ ~ minecraft:dark_oak_wall_sign{Text1:'{"color":"green","text":"双方向テレポーター"}'} run kill @s
execute unless entity @e[type=minecraft:marker,distance=..0.5,tag=xteleporter_a] run summon minecraft:marker ~ ~ ~ {Tags:["xteleporter_a","xteleporter_red"]}
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_pink,tag=xteleporter_a] add xteleporter_red_a
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_pink,tag=xteleporter_a] remove xteleporter_pink
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_green,tag=xteleporter_a] add xteleporter_pink
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_green,tag=xteleporter_a] remove xteleporter_green
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_yellow,tag=xteleporter_a] add xteleporter_green
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_yellow,tag=xteleporter_a] remove xteleporter_yellow
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_blue,tag=xteleporter_a] add xteleporter_yellow
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_blue,tag=xteleporter_a] remove xteleporter_blue
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red,tag=xteleporter_a] add xteleporter_blue
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red,tag=xteleporter_a] remove xteleporter_red
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red_a,tag=xteleporter_a] add xteleporter_red
execute unless predicate gis:sneak run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red_a,tag=xteleporter_a] remove xteleporter_red_a
execute unless predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red,tag=xteleporter_a] run data modify block ~ ~ ~ Text2 set value '[{"text":"チャンネル:","color":"white"},{"text":"red","color":"red"}]'
execute unless predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_blue,tag=xteleporter_a] run data modify block ~ ~ ~ Text2 set value '[{"text":"チャンネル:","color":"white"},{"text":"blue","color":"blue"}]'
execute unless predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_yellow,tag=xteleporter_a] run data modify block ~ ~ ~ Text2 set value '[{"text":"チャンネル:","color":"white"},{"text":"yellow","color":"yellow"}]'
execute unless predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_green,tag=xteleporter_a] run data modify block ~ ~ ~ Text2 set value '[{"text":"チャンネル:","color":"white"},{"text":"green","color":"green"}]'
execute unless predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_pink,tag=xteleporter_a] run data modify block ~ ~ ~ Text2 set value '[{"text":"チャンネル:","color":"white"},{"text":"pink","color":"light_purple"}]'
execute unless predicate gis:sneak run playsound minecraft:ui.button.click block @a ~ ~ ~ 0.5 2
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red,tag=xteleporter_a] store result score @s instant run execute if entity @e[type=minecraft:marker,tag=xteleporter_red,tag=xteleporter_b]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_blue,tag=xteleporter_a] store result score @s instant run execute if entity @e[type=minecraft:marker,tag=xteleporter_blue,tag=xteleporter_b]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_yellow,tag=xteleporter_a] store result score @s instant run execute if entity @e[type=minecraft:marker,tag=xteleporter_yellow,tag=xteleporter_b]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_green,tag=xteleporter_a] store result score @s instant run execute if entity @e[type=minecraft:marker,tag=xteleporter_green,tag=xteleporter_b]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_pink,tag=xteleporter_a] store result score @s instant run execute if entity @e[type=minecraft:marker,tag=xteleporter_pink,tag=xteleporter_b]
execute if predicate gis:sneak run scoreboard players add @s instant 1
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red,tag=xteleporter_a] run tellraw @s[scores={instant=1..2}] [{"text":"チャンネル："},{"text":"red","color":"red"},{"text":"の","color":"reset"},{"score":{"name":"@s","objective":"instant"}},{"text":"個目のポイントをセットしました"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_blue,tag=xteleporter_a] run tellraw @s[scores={instant=1..2}] [{"text":"チャンネル："},{"text":"blue","color":"blue"},{"text":"の","color":"reset"},{"score":{"name":"@s","objective":"instant"}},{"text":"個目のポイントをセットしました"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_yellow,tag=xteleporter_a] run tellraw @s[scores={instant=1..2}] [{"text":"チャンネル："},{"text":"yellow","color":"yellow"},{"text":"の","color":"reset"},{"score":{"name":"@s","objective":"instant"}},{"text":"個目のポイントをセットしました"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_green,tag=xteleporter_a] run tellraw @s[scores={instant=1..2}] [{"text":"チャンネル："},{"text":"green","color":"green"},{"text":"の","color":"reset"},{"score":{"name":"@s","objective":"instant"}},{"text":"個目のポイントをセットしました"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_pink,tag=xteleporter_a] run tellraw @s[scores={instant=1..2}] [{"text":"チャンネル："},{"text":"pink","color":"light_purple"},{"text":"の","color":"reset"},{"score":{"name":"@s","objective":"instant"}},{"text":"個目のポイントをセットしました"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_red,tag=xteleporter_a] run tellraw @s[scores={instant=3..}] [{"text":"チャンネル："},{"text":"red","color":"red"},{"text":"は既に2箇所とも設定済みです。","color":"reset"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_blue,tag=xteleporter_a] run tellraw @s[scores={instant=3..}] [{"text":"チャンネル："},{"text":"blue","color":"blue"},{"text":"は既に2箇所とも設定済みです。","color":"reset"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_yellow,tag=xteleporter_a] run tellraw @s[scores={instant=3..}] [{"text":"チャンネル："},{"text":"yellow","color":"yellow"},{"text":"は既に2箇所とも設定済みです。","color":"reset"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_green,tag=xteleporter_a] run tellraw @s[scores={instant=3..}] [{"text":"チャンネル："},{"text":"green","color":"green"},{"text":"は既に2箇所とも設定済みです。","color":"reset"}]
execute if predicate gis:sneak if entity @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_pink,tag=xteleporter_a] run tellraw @s[scores={instant=3..}] [{"text":"チャンネル："},{"text":"pink","color":"light_purple"},{"text":"は既に2箇所とも設定済みです。","color":"reset"}]
execute if predicate gis:sneak run tellraw @s[scores={instant=3..}] {"text":"ポイントを新しく設定する場合は既に設定したポイントを撤去してください"}
execute if predicate gis:sneak if score @s instant matches 1..2 run tag @e[type=minecraft:marker,distance=..0.5,sort=nearest,tag=xteleporter_a] add xteleporter_b
execute if predicate gis:sneak if score @s instant matches 1..2 run data modify block ~ ~ ~ Text4 set value '{"text":"«右クリック≫","color":"white","clickEvent":{"action":"run_command","value":"/function gis:sign/click/xteleporter_b"}}'
execute if predicate gis:sneak if score @s instant matches 1..2 run data modify block ~ ~ ~ Text3 set value '{"text":"テレポート","color":"white"}'
scoreboard players reset @s[scores={instant=1..}] instant